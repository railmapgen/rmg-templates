import{j as s,Y as j,t as R,Z as b,_ as C,$ as y,g as T}from"./chakra-46f9f9eb.js";import{u as w,a as u,s as N,R as A,b as S,r as p,c as E,d as P}from"./index-9c6d171a.js";import{u as g,E as v,a as D}from"./use-templates-dc9a288f.js";import{u as h,l as H,r as c}from"./react-a3ff4964.js";import{A as k}from"./ag-grid-bf6488dd.js";function z(){const{t,i18n:r}=h(),n=g(),l=w(),i=H(),{companyConfig:m,selectedCompany:d}=u(a=>a.app),e=m.map(a=>[a.id,n(a.name)]).sort((a,o)=>a[1].localeCompare(o[1],r.languages[0])).reduce((a,o)=>({...a,[o[0]]:o[1]}),{"":t("Please select...")}),f=[{type:"select",label:t("Company"),value:d,options:e,disabledOptions:[""],onChange:a=>l(N(a))}],x=()=>{p.isStandaloneWindow()?i("/new"):p.openApp("rmg-templates-upload"),p.event(v.UPLOAD_TEMPLATES,{})};return s.jsxs(A,{children:[s.jsx(S,{fields:f}),s.jsx(j,{ml:"auto",children:s.jsx(R,{variant:"solid",size:"sm",colorScheme:"primary",onClick:x,children:t("Upload templates")})})]})}function U(){const{t,i18n:r}=h(),n=g(),{selectedCompany:l}=u(e=>e.app),{templates:i}=D(l),m=c.useMemo(()=>[{headerName:t("Name"),field:"name",valueFormatter:({value:e})=>n(e),sortable:!0,flex:1},{headerName:t("Uploader"),field:"uploadBy",cellRenderer:({value:e})=>s.jsxs(b,{size:"lg",borderRadius:"full",onClick:()=>window.open(`https://github.com/railmapgen/rmg-templates/issues?q=is:issue+author:${e}`,"_blank"),cursor:"pointer",children:[s.jsx(C,{src:`https://github.com/${e}.png`,size:"xs",ml:-1,mr:2}),s.jsx(y,{children:e})]},e),minWidth:200},{headerName:t("Style"),field:"style",cellRenderer:({value:e})=>s.jsx(T,{children:e}),minWidth:150}],[r.language]),d=c.useMemo(()=>({resizable:!0}),[]);return s.jsx(E,{children:s.jsx(k,{rowData:i,columnDefs:m,defaultColDef:d,getRowId:({data:e})=>e.filename,headerHeight:36,rowHeight:36,suppressCellFocus:!0,suppressRowVirtualisation:!0,debug:!1})})}function O(){return s.jsxs(P,{children:[s.jsx(z,{}),s.jsx(U,{})]})}export{O as default};
