System.register(["./chakra-legacy-l4WHB1Dd.js","./index-legacy-4KUy5Ppp.js","./react-legacy-hdXM3JFv.js","./templates-grid-legacy-FrT_KKhW.js","./use-templates-legacy-WS42Gr7q.js"],(function(e,t){"use strict";var n,a,s,o,r,l,i,c,m,d,p,u,v,g,C,f,j;return{setters:[e=>{n=e.j,a=e.a8,s=e.a9,o=e.D,r=e.as,l=e.O},e=>{i=e.u,c=e.r,m=e.E,d=e.R,p=e.a},e=>{u=e.u,v=e.o,g=e.r},e=>{C=e.P,f=e.T},e=>{j=e.u}],execute:function(){e("default",(function(){const{t:e}=u(),y=j(),[h]=v(),x=h.get("parentId"),E=h.get("parentComponent"),{selectedCompany:P,coreCompanyConfig:I,otherCompanyConfig:_}=i((e=>e.app)),[S,O]=g.useState(),[$,L]=g.useState(!1),[T,w]=g.useState(!1),M=g.useRef();return g.useEffect((()=>{var e;M.current=new BroadcastChannel(t+x),c.event(m.APP_CLIP_VIEW_OPENED,{parentComponent:E}),console.log(`[${null===(e=M.current)||void 0===e?void 0:e.name}] App clip connection established, parentComponent=${E}`);const n=document.createElement("style");return n.textContent=".rmg-window__header{margin-left: unset;}",document.head.appendChild(n),()=>{var e;null===(e=M.current)||void 0===e||e.close(),document.head.removeChild(n)}}),[]),g.useEffect((()=>{O(void 0)}),[P]),n.jsxs(n.Fragment,{children:[n.jsxs(d,{children:[$&&n.jsx(p,{isIndeterminate:!0}),T&&n.jsxs(a,{status:"error",variant:"solid",size:"xs",pl:3,pr:1,py:1,children:[n.jsx(s,{}),e("Unable to import selected template.")]}),n.jsx(C,{}),n.jsx(f,{selectedTemplate:S,onTemplateSelect:O})]}),n.jsx(o,{}),n.jsxs(r,{p:2,justifyContent:"flex-end",children:[n.jsx(l,{size:"sm",onClick:()=>{var e,t;console.log(`[${null===(e=M.current)||void 0===e?void 0:e.name}] Emitting CLOSE event`),null===(t=M.current)||void 0===t||t.postMessage({event:"CLOSE"}),c.event(m.APP_CLIP_VIEW_CLOSED,{parentComponent:E}),O(void 0),w(!1)},children:e("Close")}),n.jsx(l,{size:"sm",colorScheme:"primary",isDisabled:!S,onClick:async()=>{var e,t,n;if(!S)return;const{filename:a,name:s}=S;console.log(`[${null===(e=M.current)||void 0===e?void 0:e.name}] Emitting IMPORT event, company=${P}, template=${a}`);const o=null!==(t=null===(n=[...I,..._].find((e=>e.id===P)))||void 0===n?void 0:n.name)&&void 0!==t?t:{},r=y(o)+" "+y(s);try{var l;L(!0);const e=await fetch(`/rmg-templates/resources/templates/${P}/${a}.json`),t=await e.json();null===(l=M.current)||void 0===l||l.postMessage({event:"IMPORT",meta:{company:P,filename:a,name:r},data:t}),c.event(m.APP_CLIP_VIEW_IMPORT,{parentComponent:E,company:P,filename:a})}catch(i){w(!0)}finally{L(!1),O(void 0)}},children:e("Import")})]})]})}));const t="rmg-templates-bridge--"}}}));
