System.register(["./chakra-legacy-DD_EbsbY.js","./index-legacy-zs2c_e86.js","./react-legacy-MOpOoUDF.js","./templates-grid-legacy-oLFJCKgZ.js","./use-templates-legacy-bv0S0FgW.js"],(function(e,t){"use strict";var n,o,s,a,r,l,i,c,m,d,p,u,v,g,C,f,j;return{setters:[e=>{n=e.j,o=e.w,s=e.x,a=e.Y,r=e.Z,l=e.d},e=>{i=e.u,c=e.r,m=e.E,d=e.R,p=e.a},e=>{u=e.u,v=e.o,g=e.r},e=>{C=e.P,f=e.T},e=>{j=e.u}],execute:function(){e("default",(function(){const{t:e}=u(),y=j(),[h]=v(),x=h.get("parentId"),E=h.get("parentComponent"),{selectedCompany:P,coreCompanyConfig:I,otherCompanyConfig:_}=i((e=>e.app)),[S,$]=g.useState(),[O,w]=g.useState(!1),[L,T]=g.useState(!1),M=g.useRef();return g.useEffect((()=>{var e;M.current=new BroadcastChannel(t+x),c.event(m.APP_CLIP_VIEW_OPENED,{parentComponent:E}),console.log(`[${null===(e=M.current)||void 0===e?void 0:e.name}] App clip connection established, parentComponent=${E}`);const n=document.createElement("style");return n.textContent=".rmg-window__header{margin-left: unset;}",document.head.appendChild(n),()=>{var e;null===(e=M.current)||void 0===e||e.close(),document.head.removeChild(n)}}),[]),g.useEffect((()=>{$(void 0)}),[P]),n.jsxs(n.Fragment,{children:[n.jsxs(d,{children:[O&&n.jsx(p,{isIndeterminate:!0}),L&&n.jsxs(o,{status:"error",variant:"solid",size:"xs",pl:3,pr:1,py:1,children:[n.jsx(s,{}),e("Unable to import selected template.")]}),n.jsx(C,{}),n.jsx(f,{selectedTemplate:S,onTemplateSelect:$})]}),n.jsx(a,{}),n.jsxs(r,{p:2,justifyContent:"flex-end",children:[n.jsx(l,{size:"sm",onClick:()=>{var e,t;console.log(`[${null===(e=M.current)||void 0===e?void 0:e.name}] Emitting CLOSE event`),null===(t=M.current)||void 0===t||t.postMessage({event:"CLOSE"}),c.event(m.APP_CLIP_VIEW_CLOSED,{parentComponent:E}),$(void 0),T(!1)},children:e("Close")}),n.jsx(l,{size:"sm",colorScheme:"primary",isDisabled:!S,onClick:async()=>{var e,t,n;if(!S)return;const{filename:o,name:s}=S;console.log(`[${null===(e=M.current)||void 0===e?void 0:e.name}] Emitting IMPORT event, company=${P}, template=${o}`);const a=null!==(t=null===(n=[...I,..._].find((e=>e.id===P)))||void 0===n?void 0:n.name)&&void 0!==t?t:{},r=y(a)+" "+y(s);try{var l;w(!0);const e=await fetch(`/rmg-templates/resources/templates/${P}/${o}.json`),t=await e.json();null===(l=M.current)||void 0===l||l.postMessage({event:"IMPORT",meta:{company:P,filename:o,name:r},data:t}),c.event(m.APP_CLIP_VIEW_IMPORT,{parentComponent:E,company:P,filename:o})}catch(i){T(!0)}finally{w(!1),$(void 0)}},children:e("Import")})]})]})}));const t="rmg-templates-bridge--"}}}));
