System.register(["./chakra-legacy-WbwrL6_5.js","./index-legacy-CdTY1aLF.js","./react-legacy-xPbWgXHb.js","./templates-grid-legacy-DTcKC0zb.js","./use-templates-legacy-DXa858QJ.js"],(function(e,t){"use strict";var n,s,a,r,o,c,l,i,m,p,d,u,g,C,f,j,y;return{setters:[e=>{n=e.j,s=e.U,a=e.V,r=e.D,o=e.af,c=e.t},e=>{l=e.u,i=e.r,m=e.E,p=e.R,d=e.a},e=>{u=e.u,g=e.q,C=e.a},e=>{f=e.P,j=e.T},e=>{y=e.u}],execute:function(){e("default",(function(){const{t:e}=u(),h=y(),[x]=g(),E=x.get("parentId"),P=x.get("parentComponent"),{selectedCompany:v,coreCompanyConfig:I,otherCompanyConfig:_}=l((e=>e.app)),[S,$]=C.useState(),[O,L]=C.useState(!1),[T,w]=C.useState(!1),M=C.useRef();return C.useEffect((()=>{M.current=new BroadcastChannel(t+E),i.event(m.APP_CLIP_VIEW_OPENED,{parentComponent:P}),console.log(`[${M.current?.name}] App clip connection established, parentComponent=${P}`);const e=document.createElement("style");return e.textContent=".rmg-window__header{margin-left: unset;}",document.head.appendChild(e),()=>{M.current?.close(),document.head.removeChild(e)}}),[]),C.useEffect((()=>{$(void 0)}),[v]),n.jsxs(n.Fragment,{children:[n.jsxs(p,{children:[O&&n.jsx(d,{isIndeterminate:!0}),T&&n.jsxs(s,{status:"error",variant:"solid",size:"xs",pl:3,pr:1,py:1,children:[n.jsx(a,{}),e("Unable to import selected template.")]}),n.jsx(f,{}),n.jsx(j,{selectedTemplate:S,onTemplateSelect:$})]}),n.jsx(r,{}),n.jsxs(o,{p:2,justifyContent:"flex-end",children:[n.jsx(c,{size:"sm",onClick:()=>{console.log(`[${M.current?.name}] Emitting CLOSE event`),M.current?.postMessage({event:"CLOSE"}),i.event(m.APP_CLIP_VIEW_CLOSED,{parentComponent:P}),$(void 0),w(!1)},children:e("Close")}),n.jsx(c,{size:"sm",colorScheme:"primary",isDisabled:!S,onClick:async()=>{if(!S)return;const{filename:e,name:t}=S;console.log(`[${M.current?.name}] Emitting IMPORT event, company=${v}, template=${e}`);const n=[...I,..._].find((e=>e.id===v))?.name??{},s=h(n)+" "+h(t);try{L(!0);const t=await fetch(`/rmg-templates/resources/templates/${v}/${e}.json`),n=await t.json();M.current?.postMessage({event:"IMPORT",meta:{company:v,filename:e,name:s},data:n}),i.event(m.APP_CLIP_VIEW_IMPORT,{parentComponent:P,company:v,filename:e})}catch{w(!0)}finally{L(!1),$(void 0)}},children:e("Import")})]})]})}));const t="rmg-templates-bridge--"}}}));
