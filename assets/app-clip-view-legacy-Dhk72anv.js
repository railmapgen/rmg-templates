System.register(["./mantine-legacy-J5hmvK9B.js","./templates-grid-legacy-B-f91ESS.js","./index-legacy-BV9vrUPu.js","./react-legacy-CxCkuJ5-.js","./use-templates-legacy-CrkZ8UIM.js"],(function(e,t){"use strict";var n,a,s,r,o,l,c,i,m,d,p,u,g,C,f,h,j,v;return{setters:[e=>{n=e.r,a=e.j,s=e.e,r=e.L,o=e.A,l=e.M,c=e.D,i=e.f,m=e.G,d=e.B},e=>{p=e.P,u=e.T},e=>{g=e.u,C=e.E},e=>{f=e.u,h=e.p,j=e.r},e=>{v=e.u}],execute:function(){var t=document.createElement("style");t.textContent="._alert_19801_1{padding:var(--mantine-spacing-xs);flex-shrink:0}\n/*$vite$:1*/",document.head.appendChild(t),e("default",(function(){const{t:e}=f(),t=v(),[_]=h(),E=_.get("parentId"),P=_.get("parentComponent"),{selectedCompany:I,coreCompanyConfig:$,otherCompanyConfig:S}=g((e=>e.app)),[L,O]=j.useState(),[M,T]=j.useState(!1),[b,w]=j.useState(!1),A=j.useRef(null);return j.useEffect((()=>{A.current=new BroadcastChannel(y+E),n.event(C.APP_CLIP_VIEW_OPENED,{parentComponent:P}),console.log(`[${A.current?.name}] App clip connection established, parentComponent=${P}`);const e=document.createElement("style");return e.textContent=".rmg-window__header{margin-left: unset;}",document.head.appendChild(e),()=>{A.current?.close(),document.head.removeChild(e)}}),[]),j.useEffect((()=>{O(void 0)}),[I]),a.jsxs(s,{children:[a.jsx(r,{visible:M}),b&&a.jsx(o,{variant:"light",color:"red",title:e("Error"),icon:a.jsx(l,{}),className:x.alert,children:e("Unable to import selected template.")}),a.jsx(p,{}),a.jsx(u,{selectedTemplate:L,onTemplateSelect:O}),a.jsx(c,{}),a.jsx(i,{children:a.jsxs(m,{ml:"auto",gap:"sm",children:[a.jsx(d,{variant:"default",size:"sm",onClick:()=>{console.log(`[${A.current?.name}] Emitting CLOSE event`),A.current?.postMessage({event:"CLOSE"}),n.event(C.APP_CLIP_VIEW_CLOSED,{parentComponent:P}),O(void 0),w(!1)},children:e("Close")}),a.jsx(d,{variant:"filled",size:"sm",disabled:!L,onClick:async()=>{if(!L)return;const{filename:e,name:a}=L;console.log(`[${A.current?.name}] Emitting IMPORT event, company=${I}, template=${e}`);const s=[...$,...S].find((e=>e.id===I))?.name??{},r=t(s)+" "+t(a);try{T(!0);const t=await fetch(`/rmg-templates/resources/templates/${I}/${e}.json`),a=await t.json();A.current?.postMessage({event:"IMPORT",meta:{company:I,filename:e,name:r},data:a}),n.event(C.APP_CLIP_VIEW_IMPORT,{parentComponent:P,company:I,filename:e})}catch{w(!0)}finally{T(!1),O(void 0)}},children:e("Import")})]})})]})}));const x={alert:"_alert_19801_1"},y="rmg-templates-bridge--"}}}));
